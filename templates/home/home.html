{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html data-wf-page="672c5c26a682009c4c49b338" data-wf-site="67232149875170c31d5eb871" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <meta content="Home" property="og:title">
    <meta content="Home" property="twitter:title">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link href="{% static 'css/normalize.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/webflow.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/tarotify-wrapper.webflow.css' %}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({  google: {    families: ["Afacad Flux:200,300,regular,500,600,700,800,900"]  }});</script>
    <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
    <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
    <link href="images/webclip.png" rel="apple-touch-icon">
    <style>
        #slideshow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .slide {
            position: absolute;
            width: 80%;
            max-width: 600px;
            background-color: #191414;
            color: #fff;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .slide.active {
            opacity: 1;
        }
        #progress-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            height: 5px;
            background-color: #1DB954;
            transition: width 0.5s linear;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
        }
        .slide ul {
            list-style-type: none;
            padding: 0;
        }
        .slide li {
            margin-bottom: 10px;
        }
        .language-switcher {
            position: absolute;
            top: 10px;
            right: 10px;
        }
        .language-switcher select {
            padding: 5px;
            border-radius: 5px;
            background-color: #191414;
            color: #fff;
            border: 1px solid #1DB954;
        }
    </style>
</head>
<body data-theme="light" class="body-9">
    <!-- Language Switcher -->
{#    <form action="{% url 'set_language' %}" method="post" class="language-switcher">#}
{#        {% csrf_token %}#}
{#        <input name="next" type="hidden" value="{{ request.path }}">#}
{#        <select name="language" onchange="this.form.submit()">#}
{#            {% get_current_language as CURRENT_LANGUAGE %}#}
{#            {% get_available_languages as LANGUAGES %}#}
{#            {% for lang_code, lang_name in LANGUAGES %}#}
{#                <option value="{{ lang_code }}" {% if lang_code == CURRENT_LANGUAGE %}selected{% endif %}>#}
{#                    {{ lang_name }}#}
{#                </option>#}
{#            {% endfor %}#}
{#        </select>#}
{#    </form>#}

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-left">
           <span>{% trans "Welcome," %} {{ username }}</span>
        </div>
        <div class="navbar-right">
             {% if is_connected %}
                <span>{% trans "Spotify Connected" %}</span>
             {% else %}
             <a href="{% url 'spotify:spotify_connect' %}">{% trans "Connect with Spotify" %}</a>

             {% endif %}
             <a href="#">{% trans "Stories" %}</a>
             <a href="#">{% trans "Profile" %}</a>
             <form method="post" action="{% url 'logout' %}">
                 {% csrf_token %}
                 <button type="submit">{% trans "Logout" %}</button>
                 <a href="{% url 'delete_account' %}">{% trans "Delete Account" %}</a>
             </form>
         </div>
     </nav>

    <!-- Messages -->
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
           {{ message }}
       </div>
       {% endfor %}
   </div>
   {% endif %}

   <!-- Main Content -->
   <div class="content">

        {% if is_connected %}
           <a href="{% url 'transition1RB' %}" class="generate-wrap-btn">{% trans "Generate Wrap" %}</a>



           <!-- Display Spotify Data Links -->
           <h2>{% trans "Your Spotify Data" %}</h2>
           <ul>
               <li><a href="{% url 'spotify:top_tracks' %}">{% trans "View Top 5 Tracks" %}</a></li>
               <li><a href="{% url 'spotify:random_songs' %}">{% trans "View 3 Random Songs" %}</a></li>
               <li><a href="{% url 'spotify:total_listening_time' %}">{% trans "View Total Listening Time" %}</a></li>
               <li><a href="{% url 'spotify:top_song' %}">{% trans "View Top Song" %}</a></li>
               <li><a href="{% url 'spotify:memorable_moment' %}">{% trans "View Memorable Moment" %}</a></li>



            </ul>
       {% else %}
       {% endif %}
   </div>

            <!-- Display Gemini Description -->
            <div id="slideshow-container">
                <div class="slide active">
                    <p><strong>Your Music Personality:</strong></p>
                    <p>{{ gemini_description }}</p>
                </div>
                <div id="progress-bar"></div>
            </div>
    </div>
      <section>
    <div data-animation="default" class="nav-bar-signin w-nav" data-easing2="ease" fs-scrolldisable-element="smart-nav" data-easing="ease" data-collapse="medium" data-w-id="0d699ee9-bfec-d02b-d6ea-c3edeeae146e" role="banner" data-duration="300">
      <div class="container navigation-container">
        <div class="nav-wrapper">
          <a href="{% url 'home' %}" class="nav-logo w-inline-block w--current">
            <img src="{% static 'images/tarotifylogo.png' %}" loading="lazy" sizes="32.7890625px" srcset="{% static 'images/Screenshot-2024-10-31-at-1.35.39-AM-p-500.png' %} 500w, {% static 'images/tarotifylogo.png' %} 751w" alt="" class="nav-logo-image">
          </a>

            <div class="text-block-3">Tarotify</div>
          </a>
          <nav role="navigation" class="nav-links-container w-nav-menu">
            <div class="nav-sub-container">
              <div class="nav-links-wrapper"></div>
              <a href="{% url 'spotify:spotify_connect' %}" class="nav-link nav_link--logout">{% trans "Connect with Spotify" %}</a>
              <a href="{% url 'about' %}" class="nav-link nav_link--logout">About</a>
              <a href="{% url 'contact' %}" class="nav-link nav_link--logout">Contact Us</a>
              <a href="{% url 'login' %}" class="nav-link nav_link--logout">Log out</a>
              <div class="toggle-btn">
                <div class="div-block-10 toggle-track">
                  <div data-w-id="ceb3e6d8-f4fe-cee6-30d7-75b5b3132a60" class="div-block-11 toggle-knob"></div>
                </div>
              </div>
              <div class="rainbow-btn">
                <div class="div-block-13"> ðŸŒˆ</div>
              </div>
            </div>
          </nav>
          <div class="nav-menu-button w-nav-button">
            <div class="nav-menu-icon">
              <div class="menu-icon-line-top"></div>
              <div class="menu-icon-line-middle">
                <div class="menu-icon-line-middle-inner"></div>
              </div>
              <div class="menu-icon-line-bottom"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="section-3">
  </section>
  <div class="w-layout-blockcontainer container-3 w-container">
    <a href="{% url 'transition1RB' %}" class="link-block w-inline-block">
    <div class="new-fortunes">
        <div id="new-wrap" class="div">
          <div class="sun-center">
            <div class="ray3"></div>
            <div class="ray2"></div>
            <div class="ray1"></div>
            <div class="ray4"></div>
            <div class="ray5"></div>
            <div class="ray6"></div>
            <div class="ray7"></div>
            <div class="ray8"></div>
            <div class="ray9"></div>
            <div class="ray10"></div>
            <div class="ray11"></div>
            <div class="ray12"></div>
          </div>
        </div>
        <div class="div-block-6"></div>
        <div class="div-block-7">New Wrap</div>
      </div>
    </a>
    <a href="{% url 'past_wraps' %}" class="link-block-2 w-inline-block">
      <div class="past-fortunes">
        <div class="div">
          <div class="moon">
            <div class="moon2"></div>
          </div>
          <div class="div-block-17"></div>
          <div class="star2"></div>
          <div class="star"></div>
        </div>
        <div id="past-wrap" class="div-block-6"></div>
        <div class="div-block-7">Past Wraps</div>
      </div>
    </a>
    <a href="{% url 'account' %}" class="link-block-3 w-inline-block">
      <div class="account">
        <div class="div">
          <div class="eyeray"></div>
          <div class="eyeray2"></div>
          <div class="eye">
            <div class="pupil"></div>
            <div class="pupil2"></div>
          </div>
          <div class="eyeray3"></div>
          <div class="eyeray4"></div>
        </div>
        <div id="account" class="div-block-6"></div>
        <div class="div-block-7">Account</div>
      </div>
    </a>
  </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const startButton = document.getElementById('start-slideshow');
        const closeButton = document.getElementById('close-slideshow');
        const slideshowContainer = document.getElementById('slideshow-container');
        const slides = document.querySelectorAll('.slide');
        const progressBar = document.getElementById('progress-bar');
        let currentSlide = 0;
        let slideInterval;
        const slideIntervalTime = 5000; // 5 seconds per slide

        function showSlide(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');
            progressBar.style.width = `${((index + 1) / slides.length) * 100}%`;
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
            if (currentSlide === 0) {
                // Slideshow completed
                stopSlideshow();
            }
        }

        function startSlideshow() {
            slideshowContainer.style.display = 'flex';
            currentSlide = 0;
            showSlide(currentSlide);
            slideInterval = setInterval(nextSlide, slideIntervalTime);
        }

        function stopSlideshow() {
            clearInterval(slideInterval);
            slideshowContainer.style.display = 'none';
            progressBar.style.width = '0';
        }

        startButton.addEventListener('click', function(e) {
            e.preventDefault();
            startSlideshow();
        });

            closeButton.addEventListener('click', stopSlideshow);
        });
    </script>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=67232149875170c31d5eb871" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <style>
    body[data-theme="light"] {
      --text-color: #ffcd17;
      --accent-color: #ffcd17;
      --accent2-color: #530075;
      background: linear-gradient(40deg, #8A2BE2, #FFD700, #6A0DAD, #FFB84D, #BA55D3, #FFFACD);
      background-size: 400% 400%;
      animation: gradient-shift 15s ease infinite;
	}
	body[data-theme="dark"] {
  	  --text-color: #0ab6ff;
 	  --accent-color: #0ab6ff;
  	  --accent2-color: #552fd4;
  	  background: linear-gradient(40deg, #3B2496, #180e54, #3A1F7A, #5F2A98, #9516FC, #A673E1);
  	  background-size: 400% 400%;
  	  animation: gradient-shift 15s ease infinite;
	}
	body[data-theme="rainbow"] {
  	  --text-color: #ffffff;
 	  --accent-color: #ff6ec7;
 	  --accent2-color: #00bf59;
  	background: linear-gradient(40deg, #0079F2, #8944B1, #E54DD4, #FF9E30, #FFCE33);
  	background-size: 400% 400%;
  	animation: gradient-shift 15s ease infinite;
	}
	/* Apply Theme Styles */
	body {
  	  color: var(--text-color);
  	  transition: background-color 0.3s ease, color 0.3s ease;
	}
	@keyframes gradient-shift {
  	  0% {
      background-position: 0% 50%;
  	  }
  	  50% {
      background-position: 100% 50%;
  	  }
  	  100% {
      background-position: 0% 50%;x
  	  }
  	}
</style>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const themeToggle = document.querySelector('.toggle-btn'); // Light/Dark toggle
      const rainbowButton = document.querySelector('.rainbow-btn'); // Rainbow button
      const body = document.body;
      // Apply saved theme
      const savedTheme = localStorage.getItem('theme') || 'light';
      body.setAttribute('data-theme', savedTheme);
      // Light/Dark toggle
      themeToggle.addEventListener('click', () => {
        const currentTheme = body.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        body.setAttribute('data-theme', newTheme);
        // Save the new theme in LocalStorage
        localStorage.setItem('theme', newTheme);
      });
      // Rainbow button
      rainbowButton.addEventListener('click', () => {
        body.setAttribute('data-theme', 'rainbow');
        localStorage.setItem('theme', 'rainbow');
      });
    });
</script>
</body>
</html>